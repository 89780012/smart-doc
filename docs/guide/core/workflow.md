# 工作流

工作流是 Smart Flow 的核心概念，用于定义业务流程的执行逻辑。一个工作流由多个节点和它们之间的连接组成。

## 基本属性

### 接口设置

![基本属性](/images/guide/workflow/basicProperties.png)

::: tip 提示
工作流的基本属性主要是为了定义接口属性，也是注册到web服务中的入口。
:::

| 属性名 | 说明 | 是否必填 | 示例值 |
|-------|------|---------|--------|
| id | 流程的唯一标识，在biz文件中唯一 | 是 | UUID |
| 接口名称 | 定义接口名称 | 是 | 分页查询权限 |
| 请求URL | 定义请求URL | 是 | /api/permission/page |
| 请求方法 | 定义请求方法 | 是 | POST |
| 请求协议 | 定义请求协议 | 是 | application/json |

### 流程设置

![流程设置](/images/guide/workflow/flowProperties.png)

<span style="color: red">开启SQL事务</span>

同一个流程同时存在先存在更新SQL、再存在查询SQL，二者并行串联

- 选择后， 则接口请求成功才会提交事务，若同一个流程同时存在更新SQL、查询SQL， 后者读取的数据可能是为更新前的数据
- 未选择， 每个SQL组件自动提交, 若更新后的组件存在异常，更新组件也会将数据刷新到数据库中


## 入参面板

![入参面板](/images/guide/workflow/input.png)

| 属性名 | 说明 | 是否必填 | 示例值 |
|-------|------|---------|--------|
| 参数名 | 定义参数名 | 是 | page |
| 参数类型 | 定义参数类型 | 是 | String/Integer 等等 |
| 是否必填 | 定义参数是否必填 | 是 | true/false |
| 举例 | 对字段的举例 |  否  | 比如时间 |
| 描述 | 对字段的描述 |  否  | 说明字段含义 |

## 出参面板

![出参面板](/images/guide/workflow/output.png)

- 响应结构：
    标准结构：
    ```json
    {
        "code": 200,
        "message": "success",
        "data": {
            "permissionList": [
                {
                    "id": "1",
                    "name": "权限1"
                }
            ]
        }
    }
    ```
    简单对象
    直接将数据字段作为json返回
- 数据字段定义

| 属性名 | 说明 | 是否必填 | 示例值 |
|-------|------|---------|--------|
| 字段名 | 定义字段名 | 是 | page |
| 字段类型 | 定义字段类型 | 是 | String/Integer 等等 |
| 是否提级 | 定义字段是否提级别，默认不提级，如果勾选提级则将属性挂载到data上 | 是 | 默认不提级别 |
| 描述 | 对字段的描述 |  否  | 说明字段含义 |
| 示例 | 对字段的示例 |  否  | 示例值 |

- <span style="color: red">出参字段类型不确定，可直接设定为OBJECT类型</span>


- 响应示例
  
  主要是为了方便用户预览下返回的json数据, 可能情况比较复杂，可以通过结构验证。
